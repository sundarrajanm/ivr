/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */
description = 'The IVR Server application'

allprojects {
    group = 'com.experiment.ivr'
    version = '0.0.1'

    repositories {
        mavenCentral()
        jcenter()
        maven { url "https://dl.bintray.com/mockito/maven" } //for development versions of Mockito
    }
}

subprojects {
    apply plugin: 'java'

    dependencies {
        annotationProcessor 'org.projectlombok:lombok:1.18.2'
        implementation 'org.projectlombok:lombok:1.18.2'

        compile 'org.apache.commons:commons-lang3:3.8.1'
        compile 'com.google.flogger:flogger:0.3.1'
        compile 'com.google.flogger:flogger-system-backend:0.3.1'

        testImplementation 'org.junit.jupiter:junit-jupiter-api:5.1.0'
        testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.1.0'

        testCompile 'org.mockito:mockito-junit-jupiter:2.17.2'
        testCompile 'org.assertj:assertj-core:3.9.1'
    }

    test {
        useJUnitPlatform ()
        testLogging {
            events 'PASSED', 'FAILED', 'SKIPPED'
            showStandardStreams = true
            exceptionFormat = 'full'
        }

        afterSuite { desc, result ->
            if (!desc.parent) {
                println "\nTest result: ${result.resultType}"
                println "Test summary: ${result.testCount} tests, " +
                        "${result.successfulTestCount} succeeded, " +
                        "${result.failedTestCount} failed, " +
                        "${result.skippedTestCount} skipped"
            }
        }
    }
}
